<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IEMM - Ø§Ù„ÙÙˆØ§ØªÙŠØ±</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../views/css/styles.css" />
    <link rel="stylesheet" href="../views/css/chat.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="../views/js/script.js" defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../views/js/theme-manager.js" defer></script>
    <script src="../views/js/stores/chat.js" defer></script>
    <style>
      /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ù…Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
      .table-wrapper {
        /* max-height: 400px; */
        overflow-y: visible;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
      }

      .table-wrapper table {
        width: 100%;
        border-collapse: collapse;
      }

      .table-wrapper thead {
        position: sticky;
        top: 0;
        background: #f8fafc;
        z-index: 1;
      }

      .table-wrapper th {
        padding: 12px;
        text-align: right;
        font-weight: 600;
        color: #1e293b;
        border-bottom: 2px solid #e2e8f0;
      }

      .table-wrapper td {
        padding: 12px;
        text-align: right;
        border-bottom: 1px solid #e2e8f0;
      }

      /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø© */
      .table-controls {
        display: flex;
        gap: 12px;
        margin-bottom: 12px;
        align-items: center;
      }

      .search-box {
        position: relative;
        flex: 1;
      }

      .search-box input {
        width: 100%;
        padding: 8px 12px;
        padding-right: 35px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-size: 0.9rem;
      }

      .search-box i {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        color: #64748b;
      }

      .filter-controls {
        display: flex;
        gap: 8px;
      }

      .filter-controls select {
        padding: 8px 12px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-size: 0.9rem;
        min-width: 120px;
      }

      /* Dark Mode Styles */
      body.dark .table-wrapper {
        border-color: #334155;
      }

      body.dark .table-wrapper thead {
        background: var(--dark-chart);
      }

      body.dark .table-wrapper th {
        color: var(--dark-text);
        border-bottom-color: #334155;
      }

      body.dark .table-wrapper td {
        border-bottom-color: #334155;
        color: var(--dark-text);
      }

      body.dark .search-box input {
        background: var(--dark-card);
        color: var(--dark-text);
        border-color: #334155;
      }

      body.dark .search-box i {
        color: #94a3b8;
      }

      body.dark .filter-controls select {
        background: var(--dark-card);
        color: var(--dark-text);
        border-color: #334155;
      }
    </style>
  </head>
  <body>
    <!-- Authorization Check -->
     <script>
      // Check authorization before loading the page
      function checkAuthorization() {
        const token = localStorage.getItem('token');
        const userType = localStorage.getItem('user_type');
        
        // Check if token exists
        if (!token) {
          window.location.href = '../login.html';
          return;
        }

        // Check user type (admin = 4)
        if (userType !== '2') {
          // Create and show unauthorized message
          document.body.innerHTML = `
            <div style="
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              height: 100vh;
              background-color: #f8fafc;
              font-family: Arial, sans-serif;
              text-align: center;
              padding: 20px;
            ">
              <i class="fas fa-exclamation-triangle" style="
                font-size: 64px;
                color: #ef4444;
                margin-bottom: 20px;
              "></i>
              <h1 style="
                color: #1e293b;
                font-size: 24px;
                margin-bottom: 16px;
              ">ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø§Ù„ÙˆØµÙˆÙ„</h1>
              <p style="
                color: #64748b;
                font-size: 16px;
                margin-bottom: 24px;
              ">Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©</p>
              <button onclick="window.location.href='../login.html'" style="
                background-color: #2563eb;
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 8px;
                font-size: 16px;
                cursor: pointer;
                transition: background-color 0.3s;
              ">Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            </div>
          `;
          return;
        }

        // Verify token with backend
        
      }

      // Run authorization check when page loads
      $(document).ready(function() {
        checkAuthorization();
            const isOwner = localStorage.getItem("is_owner") == "true";
        const staffLink = document.getElementById("staff-link");
        if (staffLink) {
          staffLink.style.display = isOwner ? "block" : "none";
        }
      });
    </script>
    

    <!-- Header Section -->
    <header>
      <div class="container navbar">
        <h1>IEMM</h1>
        <nav>
          <a href="shop-dashboard.html" id="dashboard-link"
            ><i class="fas fa-chart-line"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a
          >
          <a href="products-management.html" id="products-link"
            ><i class="fas fa-shopping-bag"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a
          >
          <a href="inventory.html" id="inventory-link"
            ><i class="fas fa-box"></i> Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</a
          >
          <a href="employees.html" id="staff-link"
            ><i class="fas fa-users"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ†</a
          >
          <a href="bills-stores.html" id="bills-link" class="active"
            ><i class="fas fa-file-invoice-dollar"></i> Ø§Ù„ÙÙˆØ§ØªÙŠØ±</a
          >
        </nav>
        <div style="display: flex; align-items: center; gap: 12px">
          <button class="btn-dark convert"></button>
          <!-- <button class="btn-dark " onclick="document.body.classList.toggle('dark')">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</button> -->
          <button
            id="chat-toggle"
            class="chat-toggle-btn"
            title="Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¹ Ù…Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆÙ„"
          >
            <i class="fas fa-comments"></i>
          </button>
        </div>
      </div>
    </header>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
    <div id="chat-panel" class="chat-panel">
      <div class="chat-header">
        <div class="mall-logo-container">
          <img id="mall-logo" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ„" class="mall-logo" />
          <h3>Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¹ Ù…Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆÙ„</h3>
        </div>
        <button id="chat-close" class="chat-close-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div id="messages-container" class="messages-container">
        <!-- Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø¨Ø± JavaScript -->
      </div>
      <form id="message-form" class="message-form">
        <textarea
          id="message-input"
          class="message-input"
          placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..."
          rows="1"
        ></textarea>
        <button type="submit" class="send-message-btn">
          <i class="fas fa-paper-plane"></i>
        </button>
      </form>
    </div>

    <!-- Main Content -->
    <div class="main">
      <!-- Ø¨Ø·Ø§Ù‚Ø© Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª -->
      <div class="section active" id="bills-section">
        <div class="section-header">
          <h2 class="section-title">ğŸ’° Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„ÙÙˆØ§ØªÙŠØ±</h2>
        </div>

        <div class="bills-grid">
          <!-- Ø¨Ø·Ø§Ù‚Ø© Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª -->
          <div class="table card">
            <div class="table-header">
              <h3>Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>
              <div class="table-actions">
                <div class="table-controls">
                  <div class="search-box">
                    <input
                      type="text"
                      id="sales-search"
                      placeholder="Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª..."
                    />
                    <i class="fas fa-search"></i>
                  </div>
                </div>
                <div class="quick-sale">
                  <div class="quick-sale-header">
                    <button class="btn-green" onclick="openNewSaleForm()">
                      Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø¨ÙŠØ¹ Ø¬Ø¯ÙŠØ¯Ø©
                    </button>
                  </div>
                  <div
                    id="new-sale-form"
                    class="new-sale-form"
                    style="display: none"
                  >
                    <div class="form-header">
                      <div class="sale-info">
                        <div class="info-row">
                          <span>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</span>
                          <span id="sale-number">#12345</span>
                        </div>
                        <div class="info-row">
                          <span>Ø§Ù„ØªØ§Ø±ÙŠØ®:</span>
                          <span id="sale-date"></span>
                        </div>
                      </div>
                      <button class="btn-icon" onclick="closeNewSaleForm()">
                        Ã—
                      </button>
                    </div>
                    <div class="form-content">
                      <div class="sale-grid">
                        <div class="product-input-section">
                          <div class="input-group">
                            <label>Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</label>
                            <input
                              type="text"
                              id="barcode-input"
                              placeholder="Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯..."
                              autocomplete="off"
                            />
                          </div>
                          <div class="input-group">
                            <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
                            <input
                              type="text"
                              id="product-name"
                              list="products-list"
                              placeholder="Ø§Ø¨Ø¯Ø£ Ø¨ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬..."
                              autocomplete="off"
                              oninput="validateProductInput()"
                            />
                            <datalist id="products-list">
                              <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                            </datalist>
                            <div
                              id="product-error"
                              style="
                                color: red;
                                font-size: 0.9em;
                                display: none;
                              "
                            >
                              Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                            </div>
                          </div>
                          <div class="input-group">
                            <label>Ø§Ù„ÙƒÙ…ÙŠØ©</label>
                            <input
                              type="number"
                              id="product-quantity"
                              min="1"
                              value="1"
                            />
                          </div>
                          <button
                            class="btn-green"
                            onclick="addProductToSale()"
                          >
                            Ø¥Ø¶Ø§ÙØ©
                          </button>
                        </div>

                        <div class="invoice-section">
                          <div class="invoice-table">
                            <table>
                              <thead>
                                <tr>
                                  <th>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>
                                  <th>Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</th>
                                  <th>Ø§Ù„Ø³Ø¹Ø±</th>
                                  <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                                  <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                                  <th>Ø­Ø°Ù</th>
                                </tr>
                              </thead>
                              <tbody id="selected-products-list"></tbody>
                            </table>
                          </div>

                          <div class="invoice-summary card">
                            <h4>Ù…Ù„Ø®Øµ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h4>
                            <div class="summary-grid">
                              <div class="summary-item">
                                <span class="summary-label"
                                  ><i class="fas fa-box"></i> Ø¹Ø¯Ø¯
                                  Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span
                                >
                                <span class="summary-value" id="products-count"
                                  >0</span
                                >
                              </div>
                              <div class="summary-item">
                                <span class="summary-label"
                                  ><i class="fas fa-calculator"></i> Ø¥Ø¬Ù…Ø§Ù„ÙŠ
                                  Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span
                                >
                                <span class="summary-value" id="subtotal"
                                  >0.00 Ø±ÙŠØ§Ù„</span
                                >
                              </div>
                              <div class="summary-item">
                                <span class="summary-label"
                                  ><i class="fas fa-percent"></i> Ø§Ù„Ø®ØµÙ…:</span
                                >
                                <div class="discount-input">
                                  <input
                                    type="number"
                                    id="discount"
                                    value="0"
                                    min="0"
                                    onchange="updateBillSummary()"
                                    class="form-control"
                                  />
                                  <span class="currency">Ø±ÙŠØ§Ù„</span>
                                </div>
                              </div>
                              <div class="summary-item">
                                <span class="summary-label"
                                  ><i class="fas fa-percent"></i> Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:</span
                                >
                                <div class="discount-input">
                                  <input
                                    type="number"
                                    id="tax"
                                    value="0"
                                    min="0"
                                    onchange="updateBillSummary()"
                                    class="form-control"
                                  />
                                  <span class="currency">Ø±ÙŠØ§Ù„</span>
                                </div>
                              </div>
                              <div class="summary-item total">
                                <span class="summary-label"
                                  ><i class="fas fa-money-bill-wave"></i>
                                  Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span
                                >
                                <span class="summary-value highlight" id="total"
                                  >0.00 Ø±ÙŠØ§Ù„</span
                                >
                              </div>
                            </div>
                          </div>

                          <div class="payment-section">
                            <div class="payment-method">
                              <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</label>
                              <select id="payment-method">
                                <option value="Ù†Ù‚Ø¯ÙŠ">Ù†Ù‚Ø¯ÙŠ</option>
                                <option value="Ø¨Ø·Ø§Ù‚Ø©">Ø¨Ø·Ø§Ù‚Ø©</option>
                                <option value="ØªØ­ÙˆÙŠÙ„">ØªØ­ÙˆÙŠÙ„</option>
                              </select>
                            </div>
                            <div class="sale-type">
                              <label>Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</label>
                              <select id="sale-type">
                                <option value="Ø¨ÙŠØ¹">Ø¨ÙŠØ¹</option>
                                <option value="Ø­Ø¬Ø²">Ø­Ø¬Ø²</option>
                              </select>
                            </div>
                            <div class="form-actions">
                              <button
                                class="btn-secondary"
                                onclick="closeNewSaleForm()"
                              >
                                Ø¥Ù„ØºØ§Ø¡
                              </button>
                              <button
                                type="button"
                                class="btn-green"
                                onclick="completeSale()"
                              >
                                ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¨ÙŠØ¹
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</th>
                    <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                    <th>Ø§Ù„Ù…ÙˆØ¸Ù</th>
                    <th>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</th>
                    <th>Ø§Ù„Ù†ÙˆØ¹</th>
                    <th>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                  </tr>
                </thead>
                <tbody id="sales-table-body">
                  <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© -->
    <div id="billDetailsModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h3>
          <button class="close-modal" onclick="closeBillDetailsModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="bill-details-grid">
            <div class="detail-group" id="bill-info">
              <div class="detail-group-header">
                <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h4>
                <button
                  class="btn-icon edit-section"
                  onclick="toggleBillEditMode('bill-info')"
                  title="ØªØ¹Ø¯ÙŠÙ„"
                >
                  <i class="fas fa-edit"></i>
                </button>
              </div>
              <div class="info-grid">
                <div class="detail-item">
                  <span class="detail-label">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©:</span>
                  <span id="bill-id" class="detail-value"></span>
                  <input
                    type="text"
                    id="edit-bill-id"
                    class="edit-input"
                    style="display: none"
                    readonly
                  />
                </div>
                <div class="detail-item">
                  <span class="detail-label">Ø§Ù„ØªØ§Ø±ÙŠØ®:</span>
                  <span id="bill-date" class="detail-value"></span>
                  <input
                    type="date"
                    id="edit-bill-date"
                    class="edit-input"
                    style="display: none"
                  />
                </div>
                <div class="detail-item">
                  <span class="detail-label">Ù†ÙˆØ¹ Ø§Ù„ÙØ§ØªÙˆØ±Ø©:</span>
                  <span id="bill-type" class="detail-value"></span>
                  <select
                    id="edit-bill-type"
                    class="edit-input"
                    style="display: none"
                  >
                    <option value="Ø¥ÙŠØ¬Ø§Ø±">Ø¥ÙŠØ¬Ø§Ø±</option>
                    <option value="Ø®Ø¯Ù…Ø§Øª">Ø®Ø¯Ù…Ø§Øª</option>
                    <option value="ØµÙŠØ§Ù†Ø©">ØµÙŠØ§Ù†Ø©</option>
                    <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
                  </select>
                </div>
              </div>
              <div
                class="edit-actions"
                id="bill-info-actions"
                style="display: none"
              >
                <button
                  class="btn-green"
                  onclick="saveBillSectionChanges('bill-info')"
                >
                  <i class="fas fa-save"></i> Ø­ÙØ¸
                </button>
                <button
                  class="btn-secondary"
                  onclick="cancelBillEditMode('bill-info')"
                >
                  <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
              </div>
            </div>

            <div class="detail-group" id="payment-info">
              <div class="detail-group-header">
                <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹</h4>
                <button
                  class="btn-icon edit-section"
                  onclick="toggleBillEditMode('payment-info')"
                  title="ØªØ¹Ø¯ÙŠÙ„"
                >
                  <i class="fas fa-edit"></i>
                </button>
              </div>
              <div class="info-grid">
                <div class="detail-item">
                  <span class="detail-label">Ø§Ù„Ù…Ø¨Ù„Øº:</span>
                  <span id="bill-amount" class="detail-value"></span>
                  <input
                    type="number"
                    id="edit-bill-amount"
                    class="edit-input"
                    style="display: none"
                  />
                </div>
                <div class="detail-item">
                  <span class="detail-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚:</span>
                  <span id="bill-due-date" class="detail-value"></span>
                  <input
                    type="date"
                    id="edit-bill-due-date"
                    class="edit-input"
                    style="display: none"
                  />
                </div>
                <div class="detail-item">
                  <span class="detail-label">Ø§Ù„Ø­Ø§Ù„Ø©:</span>
                  <span id="bill-status" class="detail-value"></span>
                  <select
                    id="edit-bill-status"
                    class="edit-input"
                    style="display: none"
                  >
                    <option value="Ù…Ø¹Ù„Ù‚Ø©">Ù…Ø¹Ù„Ù‚Ø©</option>
                    <option value="Ù…Ø¯ÙÙˆØ¹Ø©">Ù…Ø¯ÙÙˆØ¹Ø©</option>
                    <option value="Ù…ØªØ£Ø®Ø±Ø©">Ù…ØªØ£Ø®Ø±Ø©</option>
                  </select>
                </div>
              </div>
              <div
                class="edit-actions"
                id="payment-info-actions"
                style="display: none"
              >
                <button
                  class="btn-green"
                  onclick="saveBillSectionChanges('payment-info')"
                >
                  <i class="fas fa-save"></i> Ø­ÙØ¸
                </button>
                <button
                  class="btn-secondary"
                  onclick="cancelBillEditMode('payment-info')"
                >
                  <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
              </div>
            </div>

            <div class="detail-group" id="additional-info">
              <div class="detail-group-header">
                <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</h4>
                <button
                  class="btn-icon edit-section"
                  onclick="toggleBillEditMode('additional-info')"
                  title="ØªØ¹Ø¯ÙŠÙ„"
                >
                  <i class="fas fa-edit"></i>
                </button>
              </div>
              <div class="detail-item">
                <span class="detail-label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</span>
                <span id="bill-notes" class="detail-value"></span>
                <textarea
                  id="edit-bill-notes"
                  class="edit-input"
                  style="display: none"
                ></textarea>
              </div>
              <div
                class="edit-actions"
                id="additional-info-actions"
                style="display: none"
              >
                <button
                  class="btn-green"
                  onclick="saveBillSectionChanges('additional-info')"
                >
                  <i class="fas fa-save"></i> Ø­ÙØ¸
                </button>
                <button
                  class="btn-secondary"
                  onclick="cancelBillEditMode('additional-info')"
                >
                  <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹ -->
    <div id="saleDetailsModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹</h3>
          <button class="close-modal" onclick="closeSaleDetailsModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="sale-details-grid">
            <div class="detail-group">
              <div class="detail-group-header">
                <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</h4>
              </div>
              <div class="info-grid">
                <div class="detail-item">
                  <span class="detail-label">Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</span>
                  <span id="sale-detail-id" class="detail-value"></span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Ø§Ù„ØªØ§Ø±ÙŠØ®:</span>
                  <span id="sale-detail-date" class="detail-value"></span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Ø§Ù„Ù…ÙˆØ¸Ù:</span>
                  <span id="sale-detail-employee" class="detail-value"></span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</span>
                  <span id="sale-detail-type" class="detail-value"></span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</span>
                  <span id="sale-detail-payment" class="detail-value"></span>
                </div>
              </div>
            </div>

            <div class="detail-group">
              <div class="detail-group-header">
                <h4>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h4>
              </div>
              <div class="products-table">
                <table>
                  <thead>
                    <tr>
                      <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                      <th>Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</th>
                      <th>Ø§Ù„Ø³Ø¹Ø±</th>
                      <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                      <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                    </tr>
                  </thead>
                  <tbody id="sale-detail-products"></tbody>
                </table>
              </div>
            </div>

            <div class="detail-group">
              <div class="detail-group-header">
                <h4>Ù…Ù„Ø®Øµ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h4>
              </div>
              <div class="summary-grid">
                <div class="summary-item">
                  <span class="summary-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span>
                  <span
                    id="sale-detail-products-count"
                    class="summary-value"
                  ></span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span>
                  <span id="sale-detail-subtotal" class="summary-value"></span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Ø§Ù„Ø®ØµÙ…:</span>
                  <span id="sale-detail-discount" class="summary-value"></span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:</span>
                  <span id="sale-detail-tax" class="summary-value"></span>
                </div>
                <div class="summary-item total">
                  <span class="summary-label">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span>
                  <span id="sale-detail-total" class="summary-value"></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" onclick="closeSaleDetailsModal()">
            Ø¥ØºÙ„Ø§Ù‚
          </button>
          <button class="btn-green" onclick="printSaleFromModal()">
            <i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©
          </button>
        </div>
      </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙˆØ§Ø±Ø¯Ø© -->
    <div id="incomingBillDetailsModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙˆØ§Ø±Ø¯Ø©</h3>
          <button class="close-modal" onclick="closeIncomingBillDetailsModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="bill-details-grid">
            <div class="detail-group">
              <div class="detail-group-header">
                <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø­Ù„</h4>
              </div>
              <div class="info-grid">
                <div class="detail-item">
                  <span class="detail-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„:</span>
                  <span id="store-name" class="detail-value"></span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ø­Ù„:</span>
                  <span id="store-owner" class="detail-value"></span>
                </div>
              </div>
            </div>

            <div class="detail-group">
              <div class="detail-group-header">
                <h4>ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡</h4>
              </div>
              <div class="info-grid">
                <div class="detail-item">
                  <span class="detail-label">Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ:</span>
                  <span id="current-electricity" class="detail-value"></span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Ø§Ù„Ù…ØªØ£Ø®Ø±Ø§Øª:</span>
                  <span id="overdue-electricity" class="detail-value"></span>
                </div>
                <div class="detail-item total">
                  <span class="detail-label">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                  <span id="total-electricity" class="detail-value"></span>
                </div>
              </div>
            </div>

            <div class="detail-group">
              <div class="detail-group-header">
                <h4>ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ù…Ø§Ø¡</h4>
              </div>
              <div class="info-grid">
                <div class="detail-item">
                  <span class="detail-label">Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ:</span>
                  <span id="current-water" class="detail-value"></span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Ø§Ù„Ù…ØªØ£Ø®Ø±Ø§Øª:</span>
                  <span id="overdue-water" class="detail-value"></span>
                </div>
                <div class="detail-item total">
                  <span class="detail-label">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                  <span id="total-water" class="detail-value"></span>
                </div>
              </div>
            </div>

            <div class="detail-group">
              <div class="detail-group-header">
                <h4>Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±</h4>
              </div>
              <div class="info-grid">
                <div class="detail-item">
                  <span class="detail-label">Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ:</span>
                  <span id="current-rent" class="detail-value"></span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Ø§Ù„Ù…ØªØ£Ø®Ø±Ø§Øª:</span>
                  <span id="overdue-rent" class="detail-value"></span>
                </div>
                <div class="detail-item total">
                  <span class="detail-label">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                  <span id="total-rent" class="detail-value"></span>
                </div>
              </div>
            </div>

            <div class="detail-group">
              <div class="detail-group-header">
                <h4>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h4>
              </div>
              <div class="summary-grid">
                <div class="summary-item total">
                  <span class="summary-label">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ:</span>
                  <span id="total-bill" class="summary-value"></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button
            class="btn-secondary"
            onclick="closeIncomingBillDetailsModal()"
          >
            Ø¥ØºÙ„Ø§Ù‚
          </button>
          <button class="btn-green" onclick="printIncomingBill()">
            <i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©
          </button>
        </div>
      </div>
    </div>

    <!-- Add JavaScript functionality for the bills section -->
    <script>
      // ØªØ¹Ø±ÙŠÙ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
      const productsData = [
        { id: "123456", name: "Ù‚Ù…ÙŠØµ Ø±Ø¬Ø§Ù„ÙŠ", price: 150, stock: 20 },
        { id: "234567", name: "Ø¨Ù†Ø·Ù„ÙˆÙ† Ø¬ÙŠÙ†Ø²", price: 200, stock: 15 },
        { id: "345678", name: "Ø­Ø°Ø§Ø¡ Ø±ÙŠØ§Ø¶ÙŠ", price: 300, stock: 10 },
        { id: "456789", name: "Ø³Ø§Ø¹Ø© ÙŠØ¯", price: 500, stock: 8 },
        { id: "567890", name: "Ø­Ù‚ÙŠØ¨Ø© Ø¸Ù‡Ø±", price: 180, stock: 12 },
        { id: "678901", name: "Ø¬Ø§ÙƒÙŠØª Ø´ØªÙˆÙŠ", price: 400, stock: 7 },
        { id: "789012", name: "Ù†Ø¸Ø§Ø±Ø© Ø´Ù…Ø³ÙŠØ©", price: 250, stock: 9 },
        { id: "890123", name: "Ù…Ø­ÙØ¸Ø© Ø¬Ù„Ø¯ÙŠØ©", price: 120, stock: 15 },
        { id: "901234", name: "Ø­Ø²Ø§Ù… Ø±Ø¬Ø§Ù„ÙŠ", price: 80, stock: 20 },
        { id: "012345", name: "Ù‚Ø¨Ø¹Ø© ØµÙŠÙÙŠØ©", price: 60, stock: 25 },
      ];

      // ØªØ¹Ø±ÙŠÙ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„ÙˆØ§Ø±Ø¯Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
      const incomingBillsData = [
        {
          id: "INV-001",
          storeName: "Ù…Ø­Ù„ Ø§Ù„Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„Ø±Ø§Ù‚ÙŠØ©",
          storeOwner: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
          electricity: { current: 500, overdue: 0, total: 500 },
          water: { current: 200, overdue: 0, total: 200 },
          rent: { current: 5000, overdue: 0, total: 5000 },
          month: "Ù…Ø§Ø±Ø³ 2024",
          total: 5700,
          status: "Ù…Ø¹Ù„Ù‚Ø©",
        },
        {
          id: "INV-002",
          storeName: "Ù…Ø­Ù„ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª",
          storeOwner: "Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ",
          electricity: { current: 450, overdue: 500, total: 950 },
          water: { current: 180, overdue: 200, total: 380 },
          rent: { current: 5000, overdue: 5000, total: 10000 },
          month: "ÙØ¨Ø±Ø§ÙŠØ± 2024",
          total: 11330,
          status: "Ù…ØªØ£Ø®Ø±Ø©",
        },
        {
          id: "INV-003",
          storeName: "Ù…Ø­Ù„ Ø§Ù„Ø£Ø«Ø§Ø« Ø§Ù„Ù…Ù†Ø²Ù„ÙŠ",
          storeOwner: "Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯",
          electricity: { current: 600, overdue: 0, total: 600 },
          water: { current: 250, overdue: 0, total: 250 },
          rent: { current: 6000, overdue: 0, total: 6000 },
          month: "Ù…Ø§Ø±Ø³ 2024",
          total: 6850,
          status: "Ù…Ø¯ÙÙˆØ¹Ø©",
        },
        {
          id: "INV-004",
          storeName: "Ù…Ø­Ù„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨",
          storeOwner: "Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡",
          electricity: { current: 350, overdue: 350, total: 700 },
          water: { current: 150, overdue: 150, total: 300 },
          rent: { current: 4500, overdue: 4500, total: 9000 },
          month: "ÙŠÙ†Ø§ÙŠØ± 2024",
          total: 10000,
          status: "Ù…ØªØ£Ø®Ø±Ø©",
        },
        {
          id: "INV-005",
          storeName: "Ù…Ø­Ù„ Ø§Ù„Ø­Ù„ÙˆÙŠØ§Øª",
          storeOwner: "Ù†ÙˆØ±Ø© Ø§Ù„Ø³Ø¹ÙŠØ¯",
          electricity: { current: 550, overdue: 0, total: 550 },
          water: { current: 220, overdue: 0, total: 220 },
          rent: { current: 5500, overdue: 0, total: 5500 },
          month: "Ù…Ø§Ø±Ø³ 2024",
          total: 6270,
          status: "Ù…Ø¹Ù„Ù‚Ø©",
        },
        {
          id: "INV-006",
          storeName: "Ù…Ø­Ù„ Ø§Ù„Ø¹Ø·ÙˆØ±",
          storeOwner: "Ø¹Ù…Ø± Ù…Ø­Ù…Ø¯",
          electricity: { current: 400, overdue: 0, total: 400 },
          water: { current: 180, overdue: 0, total: 180 },
          rent: { current: 4800, overdue: 0, total: 4800 },
          month: "Ù…Ø§Ø±Ø³ 2024",
          total: 5380,
          status: "Ù…Ø¯ÙÙˆØ¹Ø©",
        },
        {
          id: "INV-007",
          storeName: "Ù…Ø­Ù„ Ø§Ù„Ø³Ø§Ø¹Ø§Øª",
          storeOwner: "ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ",
          electricity: { current: 300, overdue: 300, total: 600 },
          water: { current: 120, overdue: 120, total: 240 },
          rent: { current: 4000, overdue: 4000, total: 8000 },
          month: "ÙØ¨Ø±Ø§ÙŠØ± 2024",
          total: 8840,
          status: "Ù…ØªØ£Ø®Ø±Ø©",
        },
        {
          id: "INV-008",
          storeName: "Ù…Ø­Ù„ Ø§Ù„Ù†Ø¸Ø§Ø±Ø§Øª",
          storeOwner: "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø®Ø§Ù„Ø¯",
          electricity: { current: 350, overdue: 0, total: 350 },
          water: { current: 150, overdue: 0, total: 150 },
          rent: { current: 4500, overdue: 0, total: 4500 },
          month: "Ù…Ø§Ø±Ø³ 2024",
          total: 5000,
          status: "Ù…Ø¹Ù„Ù‚Ø©",
        },
        {
          id: "INV-009",
          storeName: "Ù…Ø­Ù„ Ø§Ù„Ø£Ø­Ø°ÙŠØ©",
          storeOwner: "Ø±ÙŠÙ… Ø§Ù„Ø³Ø¹ÙŠØ¯",
          electricity: { current: 450, overdue: 0, total: 450 },
          water: { current: 200, overdue: 0, total: 200 },
          rent: { current: 5000, overdue: 0, total: 5000 },
          month: "Ù…Ø§Ø±Ø³ 2024",
          total: 5650,
          status: "Ù…Ø¯ÙÙˆØ¹Ø©",
        },
        {
          id: "INV-010",
          storeName: "Ù…Ø­Ù„ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ©",
          storeOwner: "ÙŠØ§Ø³Ø± Ù…Ø­Ù…Ø¯",
          electricity: { current: 700, overdue: 700, total: 1400 },
          water: { current: 250, overdue: 250, total: 500 },
          rent: { current: 6000, overdue: 6000, total: 12000 },
          month: "ÙŠÙ†Ø§ÙŠØ± 2024",
          total: 13900,
          status: "Ù…ØªØ£Ø®Ø±Ø©",
        },
      ];

      // ØªØ¹Ø±ÙŠÙ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
      const sampleSalesData = [
        {
          id: "#12345",
          date: "2024-03-15 14:30",
          employee: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
          products: [
            {
              name: "Ù‚Ù…ÙŠØµ Ø±Ø¬Ø§Ù„ÙŠ",
              barcode: "123456",
              price: 150,
              quantity: 2,
              total: 300,
            },
            {
              name: "Ø¨Ù†Ø·Ù„ÙˆÙ† Ø¬ÙŠÙ†Ø²",
              barcode: "234567",
              price: 200,
              quantity: 1,
              total: 200,
            },
          ],
          type: "Ø¨ÙŠØ¹",
          paymentMethod: "Ù†Ù‚Ø¯ÙŠ",
          subtotal: 500,
          discount: 0,
          tax: 75,
          total: 575,
        },
        {
          id: "#12346",
          date: "2024-03-15 15:45",
          employee: "Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ",
          products: [
            {
              name: "Ø­Ø°Ø§Ø¡ Ø±ÙŠØ§Ø¶ÙŠ",
              barcode: "345678",
              price: 300,
              quantity: 1,
              total: 300,
            },
            {
              name: "Ù†Ø¸Ø§Ø±Ø© Ø´Ù…Ø³ÙŠØ©",
              barcode: "789012",
              price: 250,
              quantity: 1,
              total: 250,
            },
          ],
          type: "Ø­Ø¬Ø²",
          paymentMethod: "Ø¨Ø·Ø§Ù‚Ø©",
          subtotal: 550,
          discount: 50,
          tax: 75,
          total: 575,
        },
        {
          id: "#12347",
          date: "2024-03-15 16:20",
          employee: "Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯",
          products: [
            {
              name: "Ø³Ø§Ø¹Ø© ÙŠØ¯",
              barcode: "456789",
              price: 500,
              quantity: 1,
              total: 500,
            },
            {
              name: "Ø­Ù‚ÙŠØ¨Ø© Ø¸Ù‡Ø±",
              barcode: "567890",
              price: 180,
              quantity: 1,
              total: 180,
            },
          ],
          type: "Ø¨ÙŠØ¹",
          paymentMethod: "ØªØ­ÙˆÙŠÙ„",
          subtotal: 680,
          discount: 0,
          tax: 102,
          total: 782,
        },
        {
          id: "#12348",
          date: "2024-03-16 10:15",
          employee: "Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡",
          products: [
            {
              name: "Ø¬Ø§ÙƒÙŠØª Ø´ØªÙˆÙŠ",
              barcode: "678901",
              price: 400,
              quantity: 1,
              total: 400,
            },
            {
              name: "Ù‚Ø¨Ø¹Ø© ØµÙŠÙÙŠØ©",
              barcode: "012345",
              price: 60,
              quantity: 2,
              total: 120,
            },
          ],
          type: "Ø¨ÙŠØ¹",
          paymentMethod: "Ù†Ù‚Ø¯ÙŠ",
          subtotal: 520,
          discount: 20,
          tax: 75,
          total: 575,
        },
        {
          id: "#12349",
          date: "2024-03-16 11:30",
          employee: "Ù†ÙˆØ±Ø© Ø§Ù„Ø³Ø¹ÙŠØ¯",
          products: [
            {
              name: "Ù…Ø­ÙØ¸Ø© Ø¬Ù„Ø¯ÙŠØ©",
              barcode: "890123",
              price: 120,
              quantity: 3,
              total: 360,
            },
            {
              name: "Ø­Ø²Ø§Ù… Ø±Ø¬Ø§Ù„ÙŠ",
              barcode: "901234",
              price: 80,
              quantity: 2,
              total: 160,
            },
          ],
          type: "Ø­Ø¬Ø²",
          paymentMethod: "Ø¨Ø·Ø§Ù‚Ø©",
          subtotal: 520,
          discount: 0,
          tax: 78,
          total: 598,
        },
        {
          id: "#12350",
          date: "2024-03-16 13:45",
          employee: "Ø¹Ù…Ø± Ù…Ø­Ù…Ø¯",
          products: [
            {
              name: "Ù‚Ù…ÙŠØµ Ø±Ø¬Ø§Ù„ÙŠ",
              barcode: "123456",
              price: 150,
              quantity: 3,
              total: 450,
            },
            {
              name: "Ø¨Ù†Ø·Ù„ÙˆÙ† Ø¬ÙŠÙ†Ø²",
              barcode: "234567",
              price: 200,
              quantity: 2,
              total: 400,
            },
          ],
          type: "Ø¨ÙŠØ¹",
          paymentMethod: "ØªØ­ÙˆÙŠÙ„",
          subtotal: 850,
          discount: 50,
          tax: 120,
          total: 920,
        },
        {
          id: "#12351",
          date: "2024-03-17 09:20",
          employee: "ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ",
          products: [
            {
              name: "Ø­Ø°Ø§Ø¡ Ø±ÙŠØ§Ø¶ÙŠ",
              barcode: "345678",
              price: 300,
              quantity: 2,
              total: 600,
            },
            {
              name: "Ù†Ø¸Ø§Ø±Ø© Ø´Ù…Ø³ÙŠØ©",
              barcode: "789012",
              price: 250,
              quantity: 1,
              total: 250,
            },
          ],
          type: "Ø¨ÙŠØ¹",
          paymentMethod: "Ù†Ù‚Ø¯ÙŠ",
          subtotal: 850,
          discount: 0,
          tax: 127.5,
          total: 977.5,
        },
        {
          id: "#12352",
          date: "2024-03-17 10:35",
          employee: "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø®Ø§Ù„Ø¯",
          products: [
            {
              name: "Ø³Ø§Ø¹Ø© ÙŠØ¯",
              barcode: "456789",
              price: 500,
              quantity: 1,
              total: 500,
            },
            {
              name: "Ø­Ù‚ÙŠØ¨Ø© Ø¸Ù‡Ø±",
              barcode: "567890",
              price: 180,
              quantity: 2,
              total: 360,
            },
          ],
          type: "Ø­Ø¬Ø²",
          paymentMethod: "Ø¨Ø·Ø§Ù‚Ø©",
          subtotal: 860,
          discount: 60,
          tax: 120,
          total: 920,
        },
        {
          id: "#12353",
          date: "2024-03-17 14:50",
          employee: "Ø±ÙŠÙ… Ø§Ù„Ø³Ø¹ÙŠØ¯",
          products: [
            {
              name: "Ø¬Ø§ÙƒÙŠØª Ø´ØªÙˆÙŠ",
              barcode: "678901",
              price: 400,
              quantity: 1,
              total: 400,
            },
            {
              name: "Ù‚Ø¨Ø¹Ø© ØµÙŠÙÙŠØ©",
              barcode: "012345",
              price: 60,
              quantity: 3,
              total: 180,
            },
          ],
          type: "Ø¨ÙŠØ¹",
          paymentMethod: "ØªØ­ÙˆÙŠÙ„",
          subtotal: 580,
          discount: 0,
          tax: 87,
          total: 667,
        },
        {
          id: "#12354",
          date: "2024-03-18 11:15",
          employee: "ÙŠØ§Ø³Ø± Ù…Ø­Ù…Ø¯",
          products: [
            {
              name: "Ù…Ø­ÙØ¸Ø© Ø¬Ù„Ø¯ÙŠØ©",
              barcode: "890123",
              price: 120,
              quantity: 2,
              total: 240,
            },
            {
              name: "Ø­Ø²Ø§Ù… Ø±Ø¬Ø§Ù„ÙŠ",
              barcode: "901234",
              price: 80,
              quantity: 3,
              total: 240,
            },
          ],
          type: "Ø¨ÙŠØ¹",
          paymentMethod: "Ù†Ù‚Ø¯ÙŠ",
          subtotal: 480,
          discount: 30,
          tax: 67.5,
          total: 517.5,
        },
      ];

      // ØªØ¹Ø±ÙŠÙ Ù…ØµÙÙˆÙØ© Ù„ØªØ®Ø²ÙŠÙ† Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨ÙŠØ¹
      let salesHistory = [...sampleSalesData];

      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
      window.onload = function () {
        console.log("Loading data...");
        loadIncomingBills();
        loadSalesData();
        fillProductsList();
      };

      // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
      function loadSalesData() {
        console.log("Loading sales data...");
        const tbody = document.getElementById("sales-table-body");
        if (!tbody) {
          console.error("Sales table body not found");
          return;
        }

        tbody.innerHTML = ""; // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        salesHistory.forEach((sale) => {
          const row = document.createElement("tr");
          row.innerHTML = `
          <td>${sale.id}</td>
          <td>${sale.date}</td>
          <td>${sale.employee}</td>
          <td>${sale.products.length}</td>
          <td>${sale.type}</td>
          <td>${sale.total} Ø±ÙŠØ§Ù„</td>
          <td>
            <div class="action-buttons">
              <button class="btn-icon view-btn" onclick="viewSaleDetails('${sale.id}')" title="Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„">
                <i class="fas fa-eye"></i>
              </button>
              <button class="btn-icon print-btn" onclick="printSale('${sale.id}')" title="Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©">
                <i class="fas fa-print"></i>
              </button>
            </div>
          </td>
        `;
          tbody.appendChild(row);
        });
        console.log("Sales data loaded successfully");
      }

      // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„ÙˆØ§Ø±Ø¯Ø©
      function loadIncomingBills() {
        console.log("Loading incoming bills...");
        const tbody = document.getElementById("incoming-bills-table-body");
        if (!tbody) {
          console.error("Incoming bills table body not found");
          return;
        }

        tbody.innerHTML = "";
        incomingBillsData.forEach((bill) => {
          const row = document.createElement("tr");
          row.setAttribute("data-status", bill.status);
          row.setAttribute("data-month", bill.month.split(" ")[0]);
          row.innerHTML = `
          <td>${bill.electricity.current} Ø±ÙŠØ§Ù„</td>
          <td>${bill.water.current} Ø±ÙŠØ§Ù„</td>
          <td>${bill.rent.current} Ø±ÙŠØ§Ù„</td>
          <td>${bill.month}</td>
          <td>${
            bill.electricity.overdue + bill.water.overdue + bill.rent.overdue
          } Ø±ÙŠØ§Ù„</td>
          <td>${bill.total} Ø±ÙŠØ§Ù„</td>
          <td>
            <div class="action-buttons">
              <button class="btn-icon view-btn" onclick="viewIncomingBillDetails('${
                bill.id
              }')" title="Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„">
                <i class="fas fa-eye"></i>
              </button>
              <button class="btn-icon print-btn" onclick="printIncomingBill('${
                bill.id
              }')" title="Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©">
                <i class="fas fa-print"></i>
              </button>
            </div>
          </td>
        `;
          tbody.appendChild(row);
        });
        console.log("Incoming bills loaded successfully");
      }

      // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
      function searchSales(query) {
        const tbody = document.getElementById("sales-table-body");
        if (!tbody) return;

        const rows = tbody.getElementsByTagName("tr");
        query = query.toLowerCase();

        for (let row of rows) {
          const text = row.textContent.toLowerCase();
          row.style.display = text.includes(query) ? "" : "none";
        }
      }

      // ÙÙ„ØªØ±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„Ø´Ù‡Ø±
      function filterBills() {
        const statusFilter =
          document.getElementById("bill-status-filter").value;
        const monthFilter = document.getElementById("bill-month-filter").value;
        const tbody = document.getElementById("incoming-bills-table-body");
        if (!tbody) return;

        const rows = tbody.getElementsByTagName("tr");

        for (let row of rows) {
          const status = row.getAttribute("data-status");
          const month = row.getAttribute("data-month");

          const statusMatch = statusFilter === "all" || status === statusFilter;
          const monthMatch = monthFilter === "all" || month === monthFilter;

          row.style.display = statusMatch && monthMatch ? "" : "none";
        }
      }

      // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
      function openNewSaleForm() {
        const form = document.getElementById("new-sale-form");
        if (!form) return;

        form.style.display = "block";

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª
        const now = new Date();
        document.getElementById("sale-date").textContent =
          now.toLocaleString("ar-SA");

        // ØªØ­Ø¯ÙŠØ« Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
        const saleNumber = Math.floor(Math.random() * 100000);
        document.getElementById("sale-number").textContent = `#${saleNumber}`;

        // ØªÙØ¹ÙŠÙ„ Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
        document.getElementById("barcode-input").focus();

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚ÙŠÙ…
        resetSaleForm();
      }

      // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
      function findProductByBarcode(barcode) {
        return productsData.find((product) => product.id === barcode);
      }

      // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ù„Ø§Ø³Ù…
      function findProductByName(name) {
        return productsData.find((product) => product.name === name);
      }

      // ØªØ­Ø¯ÙŠØ« Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬
      function updateProductFields(product) {
        if (product) {
          document.getElementById("barcode-input").value = product.id;
          document.getElementById("product-name").value = product.name;
          document.getElementById("product-quantity").max = product.stock;
          document.getElementById("product-quantity").value = "1";
          document.getElementById("product-quantity").focus();
        }
      }

      // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù„Ù„Ø¨ÙŠØ¹
      function addProductToSale() {
        const barcode = document.getElementById("barcode-input").value.trim();
        const productName = document
          .getElementById("product-name")
          .value.trim();
        const quantity = parseInt(
          document.getElementById("product-quantity").value
        );

        if (!barcode || !productName || quantity < 1) {
          alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
          return;
        }

        const product = findProductByBarcode(barcode);
        if (!product) {
          alert("Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
          return;
        }

        if (quantity > product.stock) {
          alert("Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†");
          return;
        }

        const tbody = document.getElementById("selected-products-list");
        const row = document.createElement("tr");
        row.innerHTML = `
        <td>${product.name}</td>
        <td>${product.id}</td>
        <td>${product.price} Ø±ÙŠØ§Ù„</td>
        <td>${quantity}</td>
        <td>${product.price * quantity} Ø±ÙŠØ§Ù„</td>
        <td>
          <button class="btn-icon delete-btn" onclick="removeProduct(this)" title="Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬">
            <i class="fas fa-trash-alt"></i>
          </button>
        </td>
      `;
        tbody.appendChild(row);

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„
        document.getElementById("barcode-input").value = "";
        document.getElementById("product-name").value = "";
        document.getElementById("product-quantity").value = "1";
        document.getElementById("barcode-input").focus();

        updateBillSummary();
      }

      // Ø­Ø°Ù Ù…Ù†ØªØ¬
      function removeProduct(button) {
        button.closest("tr").remove();
        updateBillSummary();
      }

      // ØªØ­Ø¯ÙŠØ« Ù…Ù„Ø®Øµ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
      function updateBillSummary() {
        const rows = document.querySelectorAll("#selected-products-list tr");
        let subtotal = 0;

        rows.forEach((row) => {
          const totalText = row.cells[4].textContent;
          const total = parseFloat(totalText.replace(" Ø±ÙŠØ§Ù„", ""));
          subtotal += total;
        });

        const discount =
          parseFloat(document.getElementById("discount").value) || 0;
        const tax = parseFloat(document.getElementById("tax").value) || 0;
        const afterDiscount = subtotal - discount;
        const finalTotal = afterDiscount + tax;

        document.getElementById("products-count").textContent = rows.length;
        document.getElementById("subtotal").textContent = `${subtotal.toFixed(
          2
        )} Ø±ÙŠØ§Ù„`;
        document.getElementById("total").textContent = `${finalTotal.toFixed(
          2
        )} Ø±ÙŠØ§Ù„`;
      }

      // Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹
      function completeSale() {
        try {
          const products = document.getElementById(
            "selected-products-list"
          ).children;
          if (!products || products.length === 0) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");
            return;
          }

          // Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
          const saleNumber = document.getElementById("sale-number").textContent;
          const saleDate = document.getElementById("sale-date").textContent;
          const saleType = document.getElementById("sale-type").value;
          const paymentMethod = document.getElementById("payment-method").value;
          const total = document.getElementById("total").textContent;
          const discount = document.getElementById("discount").value;
          const tax = document.getElementById("tax").value;

          // Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
          const saleProducts = [];
          Array.from(products).forEach((product) => {
            saleProducts.push({
              name: product.cells[0].textContent,
              barcode: product.cells[1].textContent,
              price: parseFloat(product.cells[2].textContent),
              quantity: parseInt(product.cells[3].textContent),
              total: parseFloat(product.cells[4].textContent),
            });
          });

          // Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
          const saleData = {
            id: saleNumber,
            date: saleDate,
            type: saleType,
            paymentMethod: paymentMethod,
            products: saleProducts,
            subtotal: parseFloat(
              document.getElementById("subtotal").textContent
            ),
            discount: parseFloat(discount),
            tax: parseFloat(tax),
            total: parseFloat(total.replace(" Ø±ÙŠØ§Ù„", "")),
            employee: getCurrentEmployee(),
          };

          // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¥Ù„Ù‰ Ù…ØµÙÙˆÙØ© Ø§Ù„ØªØ§Ø±ÙŠØ®
          salesHistory.push(saleData);

          // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¥Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
          const tbody = document.getElementById("sales-table-body");
          if (!tbody) {
            throw new Error("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª");
          }

          const row = document.createElement("tr");
          row.innerHTML = `
          <td>${saleData.id}</td>
          <td>${saleData.date}</td>
          <td>${saleData.employee}</td>
          <td>${saleData.products.length}</td>
          <td>${saleData.type}</td>
          <td>${saleData.total} Ø±ÙŠØ§Ù„</td>
          <td>
            <div class="action-buttons">
              <button class="btn-icon view-btn" onclick="viewSaleDetails('${saleData.id}')" title="Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„">
                <i class="fas fa-eye"></i>
              </button>
              <button class="btn-icon print-btn" onclick="printSale('${saleData.id}')" title="Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©">
                <i class="fas fa-print"></i>
              </button>
            </div>
          </td>
        `;
          tbody.appendChild(row);

          // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
          alert("ØªÙ… Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­");

          // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†Ù‡
          closeNewSaleForm();
        } catch (error) {
          console.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹:", error);
          alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
        }
      }

      // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
      function getSaleData(saleId) {
        return salesHistory.find((sale) => sale.id === saleId);
      }

      // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹
      function viewSaleDetails(saleId) {
        const saleData = getSaleData(saleId);
        if (!saleData) return;

        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
        document.getElementById("sale-detail-id").textContent = saleData.id;
        document.getElementById("sale-detail-date").textContent = saleData.date;
        document.getElementById("sale-detail-employee").textContent =
          saleData.employee;
        document.getElementById("sale-detail-type").textContent = saleData.type;
        document.getElementById("sale-detail-payment").textContent =
          saleData.paymentMethod;

        // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        const productsTable = document.getElementById("sale-detail-products");
        productsTable.innerHTML = "";
        saleData.products.forEach((product) => {
          const row = document.createElement("tr");
          row.innerHTML = `
          <td>${product.name}</td>
          <td>${product.barcode}</td>
          <td>${product.price} Ø±ÙŠØ§Ù„</td>
          <td>${product.quantity}</td>
          <td>${product.total} Ø±ÙŠØ§Ù„</td>
        `;
          productsTable.appendChild(row);
        });

        // ØªØ­Ø¯ÙŠØ« Ù…Ù„Ø®Øµ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
        document.getElementById("sale-detail-products-count").textContent =
          saleData.products.length;
        document.getElementById(
          "sale-detail-subtotal"
        ).textContent = `${saleData.subtotal} Ø±ÙŠØ§Ù„`;
        document.getElementById(
          "sale-detail-discount"
        ).textContent = `${saleData.discount} Ø±ÙŠØ§Ù„`;
        document.getElementById(
          "sale-detail-tax"
        ).textContent = `${saleData.tax} Ø±ÙŠØ§Ù„`;
        document.getElementById(
          "sale-detail-total"
        ).textContent = `${saleData.total} Ø±ÙŠØ§Ù„`;

        // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        const modal = document.getElementById("saleDetailsModal");
        modal.style.display = "block";
      }

      // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
      function closeSaleDetailsModal() {
        const modal = document.getElementById("saleDetailsModal");
        modal.style.display = "none";
      }

      // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©
      function printSale(saleId) {
        const saleData = getSaleData(saleId);
        if (saleData) {
          const invoiceContent = `
          <div class="invoice-print">
            <div class="invoice-header">
              <div class="store-info">
                <h1>Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±</h1>
                <p>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: Ø´Ø§Ø±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØŒ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</p>
                <p>Ù‡Ø§ØªÙ: 0123456789</p>
                <p>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: store@example.com</p>
              </div>
              <div class="invoice-info">
                <h2>ÙØ§ØªÙˆØ±Ø© Ø¨ÙŠØ¹</h2>
                <div class="info-grid">
                  <div class="info-item">
                    <span class="label">Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</span>
                    <span class="value">${saleData.id}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Ø§Ù„ØªØ§Ø±ÙŠØ®:</span>
                    <span class="value">${saleData.date}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Ø§Ù„Ù…ÙˆØ¸Ù:</span>
                    <span class="value">${saleData.employee}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</span>
                    <span class="value">${saleData.type}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</span>
                    <span class="value">${saleData.paymentMethod}</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="invoice-body">
              <table class="products-table">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                    <th>Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</th>
                    <th>Ø§Ù„Ø³Ø¹Ø±</th>
                    <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                    <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                  </tr>
                </thead>
                <tbody>
                  ${saleData.products
                    .map(
                      (product, index) => `
                    <tr>
                      <td>${index + 1}</td>
                      <td>${product.name}</td>
                      <td>${product.barcode}</td>
                      <td>${product.price} Ø±ÙŠØ§Ù„</td>
                      <td>${product.quantity}</td>
                      <td>${product.total} Ø±ÙŠØ§Ù„</td>
                    </tr>
                  `
                    )
                    .join("")}
                </tbody>
              </table>
            </div>

            <div class="invoice-summary">
              <div class="summary-grid">
                <div class="summary-item">
                  <span class="label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span>
                  <span class="value">${saleData.products.length}</span>
                </div>
                <div class="summary-item">
                  <span class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span>
                  <span class="value">${saleData.subtotal} Ø±ÙŠØ§Ù„</span>
                </div>
                <div class="summary-item">
                  <span class="label">Ø§Ù„Ø®ØµÙ…:</span>
                  <span class="value">${saleData.discount} Ø±ÙŠØ§Ù„</span>
                </div>
                <div class="summary-item">
                  <span class="label">Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:</span>
                  <span class="value">${saleData.tax} Ø±ÙŠØ§Ù„</span>
                </div>
                <div class="summary-item total">
                  <span class="label">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span>
                  <span class="value">${saleData.total} Ø±ÙŠØ§Ù„</span>
                </div>
              </div>
            </div>

            <div class="invoice-footer">
              <p>Ø´ÙƒØ±Ø§Ù‹ Ù„ØªØ¹Ø§Ù…Ù„ÙƒÙ… Ù…Ø¹Ù†Ø§</p>
              <p>Ù†ØªÙ…Ù†Ù‰ Ù„ÙƒÙ… ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ Ù…Ù…ØªØ¹Ø©</p>
            </div>
          </div>
        `;

          const printWindow = window.open("", "_blank");
          printWindow.document.write(`
          <html dir="rtl">
            <head>
              <title>ÙØ§ØªÙˆØ±Ø© Ø¨ÙŠØ¹ - ${saleData.id}</title>
              <style>
                @media print {
                  body {
                    font-family: Arial, sans-serif;
                    margin: 0;
                    padding: 20px;
                    color: #333;
                  }

                  .invoice-print {
                    max-width: 800px;
                    margin: 0 auto;
                    padding: 20px;
                  }

                  .invoice-header {
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 30px;
                    padding-bottom: 20px;
                    border-bottom: 2px solid #eee;
                  }

                  .store-info {
                    text-align: right;
                  }

                  .store-info h1 {
                    margin: 0 0 10px 0;
                    color: #1e40af;
                    font-size: 24px;
                  }

                  .store-info p {
                    margin: 5px 0;
                    color: #666;
                    font-size: 14px;
                  }

                  .invoice-info {
                    text-align: left;
                  }

                  .invoice-info h2 {
                    margin: 0 0 15px 0;
                    color: #1e40af;
                    font-size: 20px;
                  }

                  .info-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 10px;
                  }

                  .info-item {
                    display: flex;
                    flex-direction: column;
                    gap: 2px;
                  }

                  .info-item .label {
                    font-size: 12px;
                    color: #666;
                  }

                  .info-item .value {
                    font-size: 14px;
                    font-weight: bold;
                    color: #333;
                  }

                  .products-table {
                    width: 100%;
                    border-collapse: collapse;
                    margin: 20px 0;
                  }

                  .products-table th,
                  .products-table td {
                    padding: 10px;
                    text-align: right;
                    border: 1px solid #ddd;
                    font-size: 14px;
                  }

                  .products-table th {
                    background-color: #f8fafc;
                    font-weight: bold;
                    color: #1e40af;
                  }

                  .products-table tr:nth-child(even) {
                    background-color: #f8fafc;
                  }

                  .invoice-summary {
                    margin-top: 20px;
                    padding: 15px;
                    background-color: #f8fafc;
                    border-radius: 8px;
                  }

                  .summary-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 10px;
                  }

                  .summary-item {
                    display: flex;
                    justify-content: space-between;
                    padding: 8px;
                    border-bottom: 1px solid #eee;
                  }

                  .summary-item.total {
                    grid-column: 1 / -1;
                    background-color: #1e40af;
                    color: white;
                    border-radius: 4px;
                    margin-top: 10px;
                    padding: 12px;
                  }

                  .summary-item.total .label,
                  .summary-item.total .value {
                    color: white;
                    font-weight: bold;
                  }

                  .invoice-footer {
                    margin-top: 30px;
                    text-align: center;
                    padding-top: 20px;
                    border-top: 2px solid #eee;
                  }

                  .invoice-footer p {
                    margin: 5px 0;
                    color: #666;
                    font-size: 14px;
                  }

                  @page {
                    size: A4;
                    margin: 0;
                  }
                </style>
            </head>
            <body>
              ${invoiceContent}
            </body>
          </html>
        `);
          printWindow.document.close();
          printWindow.print();
        }
      }

      // Ø¥ØºÙ„Ø§Ù‚ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¨ÙŠØ¹
      function closeNewSaleForm() {
        const form = document.getElementById("new-sale-form");
        const hasProducts =
          document.getElementById("selected-products-list").children.length > 0;

        if (hasProducts) {
          if (
            confirm(
              "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹ØŸ Ø³ÙŠØªÙ… ÙÙ‚Ø¯Ø§Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©."
            )
          ) {
            form.style.display = "none";
            resetSaleForm();
          }
        } else {
          form.style.display = "none";
          resetSaleForm();
        }
      }

      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¨ÙŠØ¹
      function resetSaleForm() {
        document.getElementById("selected-products-list").innerHTML = "";
        document.getElementById("barcode-input").value = "";
        document.getElementById("product-name").value = "";
        document.getElementById("product-quantity").value = "1";
        document.getElementById("discount").value = "0";
        document.getElementById("tax").value = "0";
        document.getElementById("products-count").textContent = "0";
        document.getElementById("subtotal").textContent = "0.00 Ø±ÙŠØ§Ù„";
        document.getElementById("total").textContent = "0.00 Ø±ÙŠØ§Ù„";
        document.getElementById("payment-method").value = "Ù†Ù‚Ø¯ÙŠ";
        document.getElementById("sale-type").value = "Ø¨ÙŠØ¹";
      }

      // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø­Ø§Ù„ÙŠ
      function getCurrentEmployee() {
        // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù Ù…Ù† Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        return "Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù";
      }

      // Ù…Ù„Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
      function fillProductsList() {
        const datalist = document.getElementById("products-list");
        if (!datalist) return;
        datalist.innerHTML = "";
        productsData.forEach((product) => {
          const option = document.createElement("option");
          option.value = product.name;
          datalist.appendChild(option);
        });
      }

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ù†ØªØ¬
      function validateProductInput() {
        const input = document.getElementById("product-name");
        const error = document.getElementById("product-error");
        if (!input || !error) return;

        if (
          input.value &&
          !productsData.some((product) => product.name === input.value)
        ) {
          error.style.display = "block";
          input.setCustomValidity("Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©");
        } else {
          error.style.display = "none";
          input.setCustomValidity("");
        }
      }

      // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
      document.addEventListener("DOMContentLoaded", function () {
        // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ù„Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
        const salesSearch = document.getElementById("sales-search");
        if (salesSearch) {
          salesSearch.addEventListener("input", function (e) {
            searchSales(e.target.value);
          });
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„ÙÙ„ØªØ±Ø© Ù„Ù„ÙÙˆØ§ØªÙŠØ±
        const statusFilter = document.getElementById("bill-status-filter");
        const monthFilter = document.getElementById("bill-month-filter");
        if (statusFilter) {
          statusFilter.addEventListener("change", filterBills);
        }
        if (monthFilter) {
          monthFilter.addEventListener("change", filterBills);
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
        const barcodeInput = document.getElementById("barcode-input");
        if (barcodeInput) {
          barcodeInput.addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
              const barcode = this.value.trim();
              if (barcode) {
                const product = findProductByBarcode(barcode);
                if (product) {
                  updateProductFields(product);
                } else {
                  alert("Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
                  this.value = "";
                }
              }
            }
          });
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬
        const productNameInput = document.getElementById("product-name");
        if (productNameInput) {
          productNameInput.addEventListener("change", function () {
            const productName = this.value.trim();
            if (productName) {
              const product = findProductByName(productName);
              if (product) {
                updateProductFields(product);
              }
            }
          });
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        window.onclick = function (event) {
          const modal = document.getElementById("saleDetailsModal");
          if (event.target === modal) {
            closeSaleDetailsModal();
          }
        };
      });

      // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙˆØ§Ø±Ø¯Ø©
      function viewIncomingBillDetails(billId) {
        const bill = incomingBillsData.find((b) => b.id === billId);
        if (!bill) return;

        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø­Ù„
        document.getElementById("store-name").textContent = bill.storeName;
        document.getElementById("store-owner").textContent = bill.storeOwner;

        // ØªØ­Ø¯ÙŠØ« ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡
        document.getElementById(
          "current-electricity"
        ).textContent = `${bill.electricity.current} Ø±ÙŠØ§Ù„`;
        document.getElementById(
          "overdue-electricity"
        ).textContent = `${bill.electricity.overdue} Ø±ÙŠØ§Ù„`;
        document.getElementById(
          "total-electricity"
        ).textContent = `${bill.electricity.total} Ø±ÙŠØ§Ù„`;

        // ØªØ­Ø¯ÙŠØ« ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ù…Ø§Ø¡
        document.getElementById(
          "current-water"
        ).textContent = `${bill.water.current} Ø±ÙŠØ§Ù„`;
        document.getElementById(
          "overdue-water"
        ).textContent = `${bill.water.overdue} Ø±ÙŠØ§Ù„`;
        document.getElementById(
          "total-water"
        ).textContent = `${bill.water.total} Ø±ÙŠØ§Ù„`;

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±
        document.getElementById(
          "current-rent"
        ).textContent = `${bill.rent.current} Ø±ÙŠØ§Ù„`;
        document.getElementById(
          "overdue-rent"
        ).textContent = `${bill.rent.overdue} Ø±ÙŠØ§Ù„`;
        document.getElementById(
          "total-rent"
        ).textContent = `${bill.rent.total} Ø±ÙŠØ§Ù„`;

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ
        document.getElementById(
          "total-bill"
        ).textContent = `${bill.total} Ø±ÙŠØ§Ù„`;

        // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        const modal = document.getElementById("incomingBillDetailsModal");
        modal.style.display = "block";
      }

      // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙˆØ§Ø±Ø¯Ø©
      function closeIncomingBillDetailsModal() {
        const modal = document.getElementById("incomingBillDetailsModal");
        modal.style.display = "none";
      }

      // Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙˆØ§Ø±Ø¯Ø©
      function deleteIncomingBill(billId) {
        if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŸ")) {
          const index = incomingBillsData.findIndex((b) => b.id === billId);
          if (index !== -1) {
            incomingBillsData.splice(index, 1);
            loadIncomingBills();
          }
        }
      }

      // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙˆØ§Ø±Ø¯Ø©
      function printIncomingBill(billId) {
        const bill = incomingBillsData.find((b) => b.id === billId);
        if (!bill) return;

        const printContent = `
        <div class="invoice-print">
          <div class="invoice-header">
            <div class="store-info">
              <h1>${bill.storeName}</h1>
              <p>ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ø­Ù„: ${bill.storeOwner}</p>
              <p>Ø§Ù„Ø´Ù‡Ø±: ${bill.month}</p>
            </div>
          </div>

          <div class="invoice-body">
            <div class="bill-section">
              <h3>ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡</h3>
              <div class="bill-details">
                <p>Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ: ${bill.electricity.current} Ø±ÙŠØ§Ù„</p>
                <p>Ø§Ù„Ù…ØªØ£Ø®Ø±Ø§Øª: ${bill.electricity.overdue} Ø±ÙŠØ§Ù„</p>
                <p class="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${bill.electricity.total} Ø±ÙŠØ§Ù„</p>
              </div>
            </div>

            <div class="bill-section">
              <h3>ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ù…Ø§Ø¡</h3>
              <div class="bill-details">
                <p>Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ: ${bill.water.current} Ø±ÙŠØ§Ù„</p>
                <p>Ø§Ù„Ù…ØªØ£Ø®Ø±Ø§Øª: ${bill.water.overdue} Ø±ÙŠØ§Ù„</p>
                <p class="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${bill.water.total} Ø±ÙŠØ§Ù„</p>
              </div>
            </div>

            <div class="bill-section">
              <h3>Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±</h3>
              <div class="bill-details">
                <p>Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ: ${bill.rent.current} Ø±ÙŠØ§Ù„</p>
                <p>Ø§Ù„Ù…ØªØ£Ø®Ø±Ø§Øª: ${bill.rent.overdue} Ø±ÙŠØ§Ù„</p>
                <p class="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${bill.rent.total} Ø±ÙŠØ§Ù„</p>
              </div>
            </div>

            <div class="bill-total">
              <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h3>
              <p class="total">${bill.total} Ø±ÙŠØ§Ù„</p>
            </div>
          </div>
        </div>
      `;

        const printWindow = window.open("", "_blank");
        printWindow.document.write(`
        <html dir="rtl">
          <head>
            <title>ÙØ§ØªÙˆØ±Ø© - ${bill.id}</title>
            <style>
              @media print {
                body {
                  font-family: Arial, sans-serif;
                  margin: 0;
                  padding: 20px;
                  color: #333;
                }

                .invoice-print {
                  max-width: 800px;
                  margin: 0 auto;
                }

                .invoice-header {
                  text-align: center;
                  margin-bottom: 30px;
                  padding-bottom: 20px;
                  border-bottom: 2px solid #eee;
                }

                .store-info h1 {
                  margin: 0 0 10px 0;
                  color: #1e40af;
                  font-size: 24px;
                }

                .store-info p {
                  margin: 5px 0;
                  color: #666;
                  font-size: 14px;
                }

                .bill-section {
                  margin-bottom: 20px;
                  padding: 15px;
                  background: #f8fafc;
                  border-radius: 8px;
                }

                .bill-section h3 {
                  margin: 0 0 10px 0;
                  color: #1e40af;
                  font-size: 18px;
                }

                .bill-details p {
                  margin: 5px 0;
                  font-size: 14px;
                }

                .bill-details .total {
                  font-weight: bold;
                  color: #1e40af;
                  margin-top: 10px;
                  padding-top: 10px;
                  border-top: 1px solid #eee;
                }

                .bill-total {
                  margin-top: 30px;
                  padding: 20px;
                  background: #1e40af;
                  color: white;
                  border-radius: 8px;
                  text-align: center;
                }

                .bill-total h3 {
                  margin: 0 0 10px 0;
                  font-size: 20px;
                }

                .bill-total .total {
                  font-size: 24px;
                  font-weight: bold;
                }

                @page {
                  size: A4;
                  margin: 0;
                }
              </style>
            </head>
            <body>
              ${printContent}
            </body>
          </html>
        `);
        printWindow.document.close();
        printWindow.print();
      }
    </script>
    <script src="../views/js/stores/index.js"></script>
  </body>
</html>
