<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IEMM - ุฅุฏุงุฑุฉ ุงููุญูุงุช</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../views/css/styles.css">
    <link rel="stylesheet" href="../views/css/malls-dashbboard/mall.css">
    <link rel="stylesheet" href="../views/css/chat.css">
    <script src="../views/js/script.js" defer></script>
    <script src="../views/js/chat.js" defer></script>
    <!-- ุฅุถุงูุฉ ููุชุจุฉ Font Awesome ููุฃููููุงุช -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  </head>
<body>
      <!-- Header Section -->
  <header>
    <div class="container navbar">
      <h1>IEMM</h1>
      <nav>
        <a href="mall-dashboard.html" id="dashboard-link">๐ ููุญุฉ ุงูุชุญูู</a>
        <a href="stores-management.html" id="stores-link" class="active">๐ช ุฅุฏุงุฑุฉ ุงููุญูุงุช</a>
        <a href="bills.html" id="bills-link">๐ฐ ุงูููุงุชูุฑ</a>   
      </nav>
      <div style="display: flex; align-items: center; gap: 12px;">
        <button class="btn-dark" onclick="document.body.classList.toggle('dark')">ุงููุถุน ุงููููู</button>
        <button id="chat-toggle" class="chat-toggle-btn" title="ุงูุฏุฑุฏุดุฉ ูุน ุฃุตุญุงุจ ุงููุญูุงุช">
          <i class="fas fa-comments"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- ูุงูุฐุฉ ุงูุฏุฑุฏุดุฉ ุงูุฌุงูุจูุฉ -->
  <div id="chat-panel" class="chat-panel">
    <!-- ูุงุฆูุฉ ุฌูุงุช ุงูุงุชุตุงู -->
    <div id="contacts-view">
      <div class="chat-header">
        <h3>ุงูุฏุฑุฏุดุฉ ูุน ุฃุตุญุงุจ ุงููุญูุงุช</h3>
        <button id="chat-close" class="chat-close-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div id="contact-list" class="contact-list">
        <!-- ุณูุชู ุฅูุดุงุก ูุงุฆูุฉ ุฌูุงุช ุงูุงุชุตุงู ุนุจุฑ JavaScript -->
      </div>
    </div>

    <!-- ูุงูุฐุฉ ุงููุญุงุฏุซุฉ -->
    <div id="chat-conversation" class="chat-conversation">
      <div class="conversation-header">
        <button id="back-to-contacts" class="back-to-contacts">
          <i class="fas fa-arrow-right"></i>
        </button>
        <div class="conversation-contact">
          <div id="conversation-avatar" class="conversation-avatar">ุฃ</div>
          <div class="conversation-info">
            <h4 id="conversation-title">ุฃุญูุฏ ูุญูุฏ</h4>
            <p id="conversation-store">ูุทุนู ุงูุฃุตุงูุฉ</p>
          </div>
        </div>
      </div>
      <div id="messages-container" class="messages-container">
        <!-- ุณูุชู ุฅูุดุงุก ุงูุฑุณุงุฆู ุนุจุฑ JavaScript -->
      </div>
      <form id="message-form" class="message-form">
        <textarea id="message-input" class="message-input" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..." rows="1"></textarea>
        <button type="submit" class="send-message-btn">
          <i class="fas fa-paper-plane"></i>
        </button>
      </form>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main">
        <!-- Stores Management Section -->
        <div class="section active" id="stores-section">
          <div class="section-header">
            <h2 class="section-title">๐ช ุฅุฏุงุฑุฉ ุงููุญูุงุช</h2>
            <div class="view-toggle-buttons">
              <button class="btn-dark active" id="table-view-btn" onclick="toggleView('table')">ุนุฑุถ ุงูุฌุฏุงูู</button>
              <button class="btn-dark" id="map-view-btn" onclick="toggleView('map')">ุนุฑุถ ุงูุฎุฑูุทุฉ</button>
            </div>
            <br>
            <div class="action-buttons">
            </div>
          </div>
          <!-- ุฌุฏุงูู ุงูุจูุงูุงุช -->
          <div class="tables-container" id="tables-view">
            <!-- ุฌุฏูู ุงููุญูุงุช -->
            <div class="table card">
              <div class="table-header">
                <h3>ูุงุฆูุฉ ุงููุญูุงุช</h3>
                <button class="btn-green" onclick="openNewStoreForm()">โ ุฅุถุงูุฉ ูุญู ุฌุฏูุฏ</button>
                <div class="form-container" id="newStoreFormContainer" style="display:none;">
                  <div class="form card">
                    <h3>ุฅุถุงูุฉ ูุญู ุฌุฏูุฏ</h3>
                    <div class="form-grid">
                      <input type="text" placeholder="ุฑูู ุงููุญู" required />
                      <input type="number" placeholder="ุงููุณุงุญุฉ" required />
                      <select required>
                        <option value="">ุงุฎุชุฑ ุงููุดุงุท</option>
                        <option value="restaurant">ูุทุนู</option>
                        <option value="clothing">ููุงุจุณ</option>
                        <option value="electronics">ุฅููุชุฑูููุงุช</option>
                        <option value="cosmetics">ูุณุชุญุถุฑุงุช ุชุฌููู</option>
                        <option value="services">ุฎุฏูุงุช</option>
                        <option value="other">ุฃุฎุฑู</option>
                      </select>
                      <input type="number" placeholder="ุฑูู ุงูุฏูุฑ" required />
                      <input type="number" placeholder="ุงููููุน X" required />
                      <input type="number" placeholder="ุงููููุน Y" required />
                      <input type="number" placeholder="ุงูุนุฑุถ" required />
                      <input type="number" placeholder="ุงูุทูู" required />
                    </div>
                    <button class="btn-green">ุญูุธ</button>
                  </div>
                </div>
              </div>
              <div class="table-wrapper">
                <table>
                  <thead>
                    <tr>
                      <th>ุฑูู ุงููุญู</th>
                      <th>ุงูุฏูุฑ</th>
                      <th>ุงููุดุงุท</th>
                      <th>ุงููุณุงุญุฉ</th>
                      <th>ุงูุญุงูุฉ</th>
                      <th>ุตุงุญุจ ุงููุญู</th>
                      <th>ุงูุฅุฌุฑุงุกุงุช</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>A101</td>
                      <td>ุงูุฃุฑุถู</td>
                      <td>ูุทุนู</td>
                      <td>120 ูยฒ</td>
                      <td>ูุคุฌุฑ</td>
                      <td>ุฃุญูุฏ ูุญูุฏ</td>
                      <td>
                        <button class="btn-icon" title="ุชุนุฏูู" onclick="editStore(1)">โ๏ธ</button>
                        <button class="btn-icon" title="ุชุบููุฑ ุงูุญุงูุฉ">๐</button>
                        <button class="btn-icon" title="ุญุฐู">๐๏ธ</button>
                      </td>
                    </tr>
                    <tr>
                      <td>A102</td>
                      <td>ุงูุฃุฑุถู</td>
                      <td>ููุงุจุณ</td>
                      <td>85 ูยฒ</td>
                      <td>ูุชุงุญ</td>
                      <td>-</td>
                      <td>
                        <button class="btn-green btn-sm">ุชุนููู ูุณุชุฃุฌุฑ</button>
                        <button class="btn-icon" title="ุชุบููุฑ ุงูุญุงูุฉ">๐</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="table-header">
                <br>
                <h3>ูุงุฆูุฉ ุฃุตุญุงุจ ุงููุญูุงุช</h3>
                <button class="btn-green" onclick="openNewTenantForm()">โ ุฅุถุงูุฉ ุตุงุญุจ ูุญู</button>
                <div class="form-container" id="newTenantFormContainer" style="display:none;">
                  <div class="form card">
                    <h3>ุฅุถุงูุฉ ุตุงุญุจ ูุญู</h3>
                    <div class="form-grid">
                      <input type="text" placeholder="ุงุณู ุงููุณุชุฃุฌุฑ" required />
                      <input type="tel" placeholder="ุฑูู ุงูุฌูุงู" required />
                      <input type="email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" />
                      <select required>
                        <option value="">ุงุฎุชุฑ ุงููุญู</option>
                        <option value="A102">A102 - ูุชุงุญ</option>
                        <option value="A103">A103 - ูุชุงุญ</option>
                      </select>
                    </div>
                    <button class="btn-green">ุญูุธ</button>
                  </div>
                </div>
              </div>
              <div class="table-wrapper">
                <table>
                  <thead>
                    <tr>
                      <th>ุงูุงุณู</th>
                      <th>ุฑูู ุงูุฌูุงู</th>
                      <th>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</th>
                      <th>ุงููุญูุงุช ุงููุณุชุฃุฌุฑุฉ</th>
                      <th>ุงูุฅุฌุฑุงุกุงุช</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>ุฃุญูุฏ ูุญูุฏ</td>
                      <td>0501234567</td>
                      <td>ahmed@example.com</td>
                      <td>A101, B203</td>
                      <td>
                        <button class="btn-icon" title="ุชุนุฏูู" onclick="editTenant(1)">โ๏ธ</button>
                        <button class="btn-icon" title="ุญุฐู">๐๏ธ</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        
          <!-- ุฎุฑูุทุฉ ุงูููู -->
          <div class="card" id="map-view" style="display: none;">
            <h3>ุฎุฑูุทุฉ ุงูููู</h3>
            <div class="floor-controls">
              <button class="btn-green" onclick="decrementFloor()">-</button>
              <span id="currentFloor">ุงูุฏูุฑ: 0</span>
              <button class="btn-green" onclick="incrementFloor()">+</button>
            </div>
            <div id="mall-map"></div>
          </div>
          <!-- ูููุฐุฌ ุฅุถุงูุฉ ูุญู ุฌุฏูุฏ -->
          <div class="form-container" id="newStoreFormContainer" style="display:none;">
            <div class="form card">
              <h3>ุฅุถุงูุฉ ูุญู ุฌุฏูุฏ</h3>
              <div class="form-grid" style="grid-template-columns: repeat(3, 1fr); gap: 16px;">
                <!-- ูุนูููุงุช ุงููุญู ุงูุฃุณุงุฆูุฉ -->
                <div class="form-section" style="background: #f8fafc; padding: 16px; border-radius: 12px;">
                  <h4 style="margin: 0 0 12px 0; color: #1e3a8a;">ูุนูููุงุช ุงููุญู ุงูุฃุณุงุฆูุฉ</h4>
                  <div class="input-group" style="display: flex; flex-direction: column; gap: 12px;">
                    <input type="text" placeholder="ุฑูู ุงููุญู" required style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #e2e8f0;" />
                    <input type="number" placeholder="ุงููุณุงุญุฉ" required style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #e2e8f0;" />
                    <select required style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #e2e8f0; background: white;">
                      <option value="">ุงุฎุชุฑ ุงููุดุงุท</option>
                      <option value="restaurant">ูุทุนู</option>
                      <option value="clothing">ููุงุจุณ</option>
                      <option value="electronics">ุฅููุชุฑูููุงุช</option>
                      <option value="cosmetics">ูุณุชุญุถุฑุงุช ุชุฌููู</option>
                      <option value="services">ุฎุฏูุงุช</option>
                      <option value="other">ุฃุฎุฑู</option>
                    </select>
                  </div>
                </div>
                <!-- ูููุน ุงููุญู -->
                <div class="form-section" style="background: #f8fafc; padding: 16px; border-radius: 12px;">
                  <h4 style="margin: 0 0 12px 0; color: #1e3a8a;">ูููุน ุงููุญู</h4>
                  <div class="input-group" style="display: flex; flex-direction: column; gap: 12px;">
                    <input type="number" placeholder="ุฑูู ุงูุฏูุฑ" required style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #e2e8f0;" />
                    <div class="coordinates" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                      <input type="number" placeholder="ุงููููุน X" required style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #e2e8f0;" />
                      <input type="number" placeholder="ุงููููุน Y" required style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #e2e8f0;" />
                    </div>
                  </div>
                </div>
                <!-- ุฃุจุนุงุฏ ุงููุญู -->
                <div class="form-section" style="background: #f8fafc; padding: 16px; border-radius: 12px;">
                  <h4 style="margin: 0 0 12px 0; color: #1e3a8a;">ุฃุจุนุงุฏ ุงููุญู</h4>
                  <div class="input-group dimensions" style="display: flex; flex-direction: column; gap: 12px;">
                    <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 8px; align-items: center;">
                      <input type="number" placeholder="ุงูุนุฑุถ" required style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #e2e8f0;" />
                      <span style="text-align: center; color: #64748b;">ร</span>
                      <input type="number" placeholder="ุงูุทูู" required style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #e2e8f0;" />
                    </div>
                  </div>
                </div>
              </div>
              <button class="btn-green" style="margin-top: 24px; width: 100%; padding: 12px;">ุญูุธ</button>
            </div>
          </div>
          <!-- ูููุฐุฌ ุฅุถุงูุฉ ุตุงุญุจ ูุญู -->
        
        </div>
            <!-- ูุงูุฐุฉ ุชุนุฏูู ุงููุญู -->
        <div id="editStoreModal" class="modal">
        <div class="modal-content">
            <h3>ุชุนุฏูู ุจูุงูุงุช ุงููุญู</h3>
            <form class="form">
            <div class="form-sections">
                <!-- ูุณู ุจูุงูุงุช ุงููุญู -->
                <div class="form-section">
                <h4>ุจูุงูุงุช ุงููุญู</h4>
                <div class="form-grid">
                    <div class="form-group">
                    <label for="edit-store-number">ุฑูู ุงููุญู</label>
                    <input type="text" id="edit-store-number" placeholder="ุฑูู ุงููุญู" required />
                    </div>
                    <div class="form-group">
                    <label for="edit-store-area">ุงููุณุงุญุฉ</label>
                    <input type="number" id="edit-store-area" placeholder="ุงููุณุงุญุฉ" required />
                    </div>
                    <div class="form-group">
                    <label for="edit-store-activity">ุงููุดุงุท</label>
                    <select id="edit-store-activity" required>
                        <option value="">ุงุฎุชุฑ ุงููุดุงุท</option>
                        <option value="restaurant">ูุทุนู</option>
                        <option value="clothing">ููุงุจุณ</option>
                        <option value="electronics">ุฅููุชุฑูููุงุช</option>
                        <option value="cosmetics">ูุณุชุญุถุฑุงุช ุชุฌููู</option>
                        <option value="services">ุฎุฏูุงุช</option>
                        <option value="other">ุฃุฎุฑู</option>
                    </select>
                    </div>
                    <div class="form-group">
                    <label for="edit-store-floor">ุฑูู ุงูุฏูุฑ</label>
                    <input type="number" id="edit-store-floor" placeholder="ุฑูู ุงูุฏูุฑ" required />
                    </div>
                    <div class="form-group">
                    <label for="edit-store-x">ุงููููุน X</label>
                    <input type="number" id="edit-store-x" placeholder="ุงููููุน X" required />
                    </div>
                    <div class="form-group">
                    <label for="edit-store-y">ุงููููุน Y</label>
                    <input type="number" id="edit-store-y" placeholder="ุงููููุน Y" required />
                    </div>
                    <div class="form-group">
                    <label for="edit-store-width">ุงูุนุฑุถ</label>
                    <input type="number" id="edit-store-width" placeholder="ุงูุนุฑุถ" required />
                    </div>
                    <div class="form-group">
                    <label for="edit-store-height">ุงูุทูู</label>
                    <input type="number" id="edit-store-height" placeholder="ุงูุทูู" required />
                    </div>
                </div>
                </div>

                <!-- ูุณู ุจูุงูุงุช ุตุงุญุจ ุงููุญู -->
                <div class="form-section">
                <h4>ุจูุงูุงุช ุตุงุญุจ ุงููุญู</h4>
                <div class="form-grid">
                    <div class="form-group">
                    <label for="edit-tenant-name">ุงุณู ุงููุณุชุฃุฌุฑ</label>
                    <input type="text" id="edit-tenant-name" placeholder="ุงุณู ุงููุณุชุฃุฌุฑ" required />
                    </div>
                    <div class="form-group">
                    <label for="edit-tenant-phone">ุฑูู ุงูุฌูุงู</label>
                    <input type="tel" id="edit-tenant-phone" placeholder="ุฑูู ุงูุฌูุงู" required />
                    </div>
                    <div class="form-group">
                    <label for="edit-tenant-email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                    <input type="email" id="edit-tenant-email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" />
                    </div>
                    <div class="form-group">
                    <label for="edit-tenant-id">ุฑูู ุงููููุฉ</label>
                    <input type="text" id="edit-tenant-id" placeholder="ุฑูู ุงููููุฉ" required />
                    </div>
                    <div class="form-group">
                    <label for="edit-tenant-contract-start">ุชุงุฑูุฎ ุจุฏุงูุฉ ุงูุนูุฏ</label>
                    <input type="date" id="edit-tenant-contract-start" required />
                    </div>
                    <div class="form-group">
                    <label for="edit-tenant-contract-end">ุชุงุฑูุฎ ููุงูุฉ ุงูุนูุฏ</label>
                    <input type="date" id="edit-tenant-contract-end" required />
                    </div>
                </div>
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn-green">ุญูุธ ุงูุชุบููุฑุงุช</button>
                <button type="button" class="btn-secondary" onclick="closeModal('editStoreModal')">ุฅูุบุงุก</button>
            </div>
            </form>
        </div>
        </div>

        <!-- ูุงูุฐุฉ ุนุฑุถ ุชูุงุตูู ุงููุญู -->
        <div id="storeDetailsModal" class="modal">
        <div class="modal-content">
            <h3>ุชูุงุตูู ุงููุญู</h3>
            <div class="details-sections">
            <!-- ูุณู ุจูุงูุงุช ุงููุญู -->
            <div class="details-section">
                <h4>ุจูุงูุงุช ุงููุญู</h4>
                <div class="details-grid">
                <div class="detail-row">
                    <span class="detail-label">ุฑูู ุงููุญู:</span>
                    <span class="detail-value" id="view-store-number"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ุงููุณุงุญุฉ:</span>
                    <span class="detail-value" id="view-store-area"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ุงููุดุงุท:</span>
                    <span class="detail-value" id="view-store-activity"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ุฑูู ุงูุฏูุฑ:</span>
                    <span class="detail-value" id="view-store-floor"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ุงููููุน:</span>
                    <span class="detail-value" id="view-store-location"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ุงูุฃุจุนุงุฏ:</span>
                    <span class="detail-value" id="view-store-dimensions"></span>
                </div>
                </div>
            </div>

            <!-- ูุณู ุจูุงูุงุช ุตุงุญุจ ุงููุญู -->
            <div class="details-section">
                <h4>ุจูุงูุงุช ุตุงุญุจ ุงููุญู</h4>
                <div class="details-grid">
                <div class="detail-row">
                    <span class="detail-label">ุงุณู ุงููุณุชุฃุฌุฑ:</span>
                    <span class="detail-value" id="view-tenant-name"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ุฑูู ุงูุฌูุงู:</span>
                    <span class="detail-value" id="view-tenant-phone"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</span>
                    <span class="detail-value" id="view-tenant-email"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ุฑูู ุงููููุฉ:</span>
                    <span class="detail-value" id="view-tenant-id"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ุชุงุฑูุฎ ุจุฏุงูุฉ ุงูุนูุฏ:</span>
                    <span class="detail-value" id="view-tenant-contract-start"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ุชุงุฑูุฎ ููุงูุฉ ุงูุนูุฏ:</span>
                    <span class="detail-value" id="view-tenant-contract-end"></span>
                </div>
                </div>
            </div>
            </div>
            <div class="modal-actions">
            <button class="btn-secondary" onclick="closeModal('storeDetailsModal')">ุฅุบูุงู</button>
            </div>
        </div>
        </div>
    </div>
<script src="../views/js/mall-management/index.js"></script>

</body>
</html>

