<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IEMM - ุงูููุงุชูุฑ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../views/css/styles.css">
    <link rel="stylesheet" href="../views/css/malls-dashbboard/mall.css">
    <link rel="stylesheet" href="../views/css/chat.css">
    <script src="../views/js/script.js" defer></script>
    <script src="../views/js/chat.js" defer></script>
    <script src="../views/js/theme-manager.js" defer></script>
    <!-- ุฅุถุงูุฉ ููุชุจุฉ Font Awesome ููุฃููููุงุช -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  </head>
<body>
    <!-- Header Section -->
  <header>
    <div class="container navbar">
      <h1>IEMM</h1>
      <nav>
        <a href="mall-dashboard.html" id="dashboard-link">๐ ููุญุฉ ุงูุชุญูู</a>
        <a href="stores-management.html" id="stores-link">๐ช ุฅุฏุงุฑุฉ ุงููุญูุงุช</a>
        <a href="bills.html" id="bills-link" class="active">๐ฐ ุงูููุงุชูุฑ</a>   
      </nav>
      <div style="display: flex; align-items: center; gap: 12px;">
        <button class="btn-dark">ุงููุถุน ุงููููู</button>
        <!-- <button class="btn-dark" onclick="document.body.classList.toggle('dark')">ุงููุถุน ุงููููู</button> -->
        <button id="chat-toggle" class="chat-toggle-btn" title="ุงูุฏุฑุฏุดุฉ ูุน ุฃุตุญุงุจ ุงููุญูุงุช">
          <i class="fas fa-comments"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- ูุงูุฐุฉ ุงูุฏุฑุฏุดุฉ ุงูุฌุงูุจูุฉ -->
  <div id="chat-panel" class="chat-panel">
    <!-- ูุงุฆูุฉ ุฌูุงุช ุงูุงุชุตุงู -->
    <div id="contacts-view">
      <div class="chat-header">
        <h3>ุงูุฏุฑุฏุดุฉ ูุน ุฃุตุญุงุจ ุงููุญูุงุช</h3>
        <button id="chat-close" class="chat-close-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div id="contact-list" class="contact-list">
        <!-- ุณูุชู ุฅูุดุงุก ูุงุฆูุฉ ุฌูุงุช ุงูุงุชุตุงู ุนุจุฑ JavaScript -->
      </div>
    </div>

    <!-- ูุงูุฐุฉ ุงููุญุงุฏุซุฉ -->
    <div id="chat-conversation" class="chat-conversation">
      <div class="conversation-header">
        <button id="back-to-contacts" class="back-to-contacts">
          <i class="fas fa-arrow-right"></i>
        </button>
        <div class="conversation-contact">
          <div id="conversation-avatar" class="conversation-avatar">ุฃ</div>
          <div class="conversation-info">
            <h4 id="conversation-title">ุฃุญูุฏ ูุญูุฏ</h4>
            <p id="conversation-store">ูุทุนู ุงูุฃุตุงูุฉ</p>
          </div>
        </div>
      </div>
      <div id="messages-container" class="messages-container">
        <!-- ุณูุชู ุฅูุดุงุก ุงูุฑุณุงุฆู ุนุจุฑ JavaScript -->
      </div>
      <form id="message-form" class="message-form">
        <textarea id="message-input" class="message-input" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..." rows="1"></textarea>
        <button type="submit" class="send-message-btn">
          <i class="fas fa-paper-plane"></i>
        </button>
      </form>
    </div>
  </div>

  <!-- Main Content -->
    <div class="main">    
    <!-- Bills Section -->
    <div class="section active" id="bills-section">
      <div class="section-header">
        <h2 class="section-title">๐ฐ ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ</h2>
        <div class="action-buttons">
          <button class="btn-green" onclick="document.getElementById('newInvoiceFormContainer').style.display = document.getElementById('newInvoiceFormContainer').style.display === 'none' ? 'block' : 'none'">โ ุฅูุดุงุก ูุงุชูุฑุฉ ุฌุฏูุฏุฉ</button>
          <div class="form-container" id="newInvoiceFormContainer" style="display:none;">
            <div class="form card">
              <h3>ุฅุถุงูุฉ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ</h3>
              <div class="form-grid">
                <select required>
                  <option value="">ุงุฎุชุฑ ุงููุญู</option>
                  <option value="A101">A101 - ูุทุนู</option>
                  <option value="B202">B202 - ููุงุจุณ</option>
                </select>
    
                <select required>
                  <option value="">ุงุฎุชุฑ ููุน ุงููุงุชูุฑุฉ</option>
                  <option value="rent">ุฅูุฌุงุฑ</option>
                  <option value="electricity">ููุฑุจุงุก</option>
                  <option value="water">ูุงุก</option>
                </select>
    
                <input type="number" placeholder="ุงููุจูุบ" required>
                <input type="date" placeholder="ุชุงุฑูุฎ ุงูุฅุตุฏุงุฑ" required>
                <input type="date" placeholder="ุชุงุฑูุฎ ุงูุงุณุชุญูุงู" required>
                <textarea placeholder="ููุงุญุธุงุช"></textarea>
              </div>
              <button class="btn-green">ุญูุธ</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Invoices Table with Integrated Filters -->
      <div class="table card">
        <div class="table-header">
          <div class="filter-controls">
            <div class="filter-group">
              <div class="search-box">
                <input type="text" id="search-input" class="search-input" placeholder="ุจุญุซ ูู ุงุณู ุงููุญู ุฃู ุตุงุญุจ ุงููุญู..." oninput="applyFilters()">
              </div>
              <select id="invoice-type-filter" class="filter-select" onchange="applyFilters()">
                <option value="all">ูู ุฃููุงุน ุงูููุงุชูุฑ</option>
                <option value="rent">ุฅูุฌุงุฑ</option>
                <option value="electricity">ููุฑุจุงุก</option>
                <option value="water">ูุงุก</option>
              </select>

              <select id="status-filter" class="filter-select" onchange="applyFilters()">
                <option value="all">ูู ุงูุญุงูุงุช</option>
                <option value="paid">ูุฏููุนุฉ</option>
                <option value="unpaid">ุบูุฑ ูุฏููุนุฉ</option>
                <option value="overdue">ูุชุฃุฎุฑุฉ</option>
              </select>
            </div>

            <button class="btn-dark" onclick="openBulkMessageModal()">๐ ุฅุฑุณุงู ุฑุณุงูุฉ ุฌูุงุนูุฉ</button>
          </div>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>๐ช ุงุณู ุงููุญู</th>
                <th>๐ค ุงุณู ุตุงุญุจ ุงููุญู</th>
                <th>โก ุงูููุฑุจุงุก</th>
                <th>๐ง ุงููุงุก</th>
                <th>๐ข ุงูุฅูุฌุงุฑ</th>
                <th>๐ ุงูุดูุฑ</th>
                <th>โณ ุงููุชุฃุฎุฑุงุช</th>
                <th>๐ฐ ุงูุฅุฌูุงูู</th>
                <th>โ๏ธ ุงูุฅุฌุฑุงุกุงุช</th>
              </tr>
            </thead>
            <tbody>
              <tr data-invoice-id="1">
                <td>ูุญู A101</td>
                <td>ุฃุญูุฏ ูุญูุฏ</td>
                <td>500 ุฑูุงู</td>
                <td>200 ุฑูุงู</td>
                <td>5,000 ุฑูุงู</td>
                <td>ูุจุฑุงูุฑ 2024</td>
                <td>0 ุฑูุงู</td>
                <td>5,700 ุฑูุงู</td>
                <td>
                  <button class="btn-icon" title="ุนุฑุถ ุงูุชูุงุตูู" onclick="viewInvoice(1)">๐</button>
                  <button class="btn-icon" title="ุชุนุฏูู" onclick="editInvoice(1)">โ๏ธ</button>
                  <button class="btn-icon" title="ุฅุฑุณุงู ุฑุณุงูุฉ" onclick="sendMessage(1)">โ๏ธ</button>
                </td>
              </tr>
              <tr data-invoice-id="2">
                <td>ูุญู B202</td>
                <td>ุฎุงูุฏ ุนุจุฏุงููู</td>
                <td>750 ุฑูุงู</td>
                <td>300 ุฑูุงู</td>
                <td>4,000 ุฑูุงู</td>
                <td>ูุจุฑุงูุฑ 2024</td>
                <td>1,500 ุฑูุงู</td>
                <td>6,550 ุฑูุงู</td>
                <td>
                  <button class="btn-icon" title="ุนุฑุถ ุงูุชูุงุตูู" onclick="viewInvoice(2)">๐</button>
                  <button class="btn-icon" title="ุชุนุฏูู" onclick="editInvoice(2)">โ๏ธ</button>
                  <button class="btn-icon" title="ุฅุฑุณุงู ุฑุณุงูุฉ" onclick="sendMessage(2)">โ๏ธ</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

     
     

      <!-- Bulk Message Modal -->
      <div id="bulkMessageModal" class="modal">
        <div class="modal-content">
          <h3>ุฅุฑุณุงู ุฑุณุงูุฉ ุฌูุงุนูุฉ</h3>
          <form class="form">
            <div class="form-group">
              <label>ูุต ุงูุฑุณุงูุฉ</label>
              <textarea required></textarea>
            </div>
            <button type="submit" class="btn-green">ุฅุฑุณุงู</button>
          </form>
        </div>
      </div>

      <!-- Invoice Details Modal -->
      <div id="invoiceDetailsModal" class="modal">
        <div class="modal-content">
          <h3>ุชูุงุตูู ุงูููุงุชูุฑ</h3>
          
          <div class="bill-sections-container">
            <div class="bill-section">
              <h4>๐ช ุงุณู ุงููุญู</h4>
              <div class="bill-details">
                <div class="detail-row">
                  <span class="detail-label">ุงุณู ุงููุญู</span>
                  <span class="detail-value">ูุญู A101</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">ุงุณู ุตุงุญุจ ุงููุญู</span>
                  <span class="detail-value">ุฃุญูุฏ ูุญูุฏ</span>
                </div>
              </div>
            </div>
            <!-- ูุณู ุงูููุฑุจุงุก -->
            <div class="bill-section">
              <h4>โก ุงูููุฑุจุงุก</h4>
              <div class="bill-details">
                <div class="detail-row">
                  <span class="detail-label">ูุจูุบ ุงูุดูุฑ ุงูุญุงูู</span>
                  <span class="detail-value">500 ุฑูุงู</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">ุงููุชุฃุฎุฑุงุช</span>
                  <span class="detail-value">0 ุฑูุงู</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">ุงูุฅุฌูุงูู</span>
                  <span class="detail-value">500 ุฑูุงู</span>
                </div>
              </div>
            </div>
            <!-- ูุณู ุงููุงุก -->
            <div class="bill-section">
              <h4>๐ง ุงููุงุก</h4>
              <div class="bill-details">
                <div class="detail-row">
                  <span class="detail-label">ูุจูุบ ุงูุดูุฑ ุงูุญุงูู</span>
                  <span class="detail-value">200 ุฑูุงู</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">ุงููุชุฃุฎุฑุงุช</span>
                  <span class="detail-value">0 ุฑูุงู</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">ุงูุฅุฌูุงูู</span>
                  <span class="detail-value">200 ุฑูุงู</span>
                </div>
              </div>
            </div>
            <!-- ูุณู ุงูุฅูุฌุงุฑ -->
            <div class="bill-section">
              <h4>๐ข ุงูุฅูุฌุงุฑ</h4>
              <div class="bill-details">
                <div class="detail-row">
                  <span class="detail-label">ูุจูุบ ุงูุดูุฑ ุงูุญุงูู</span>
                  <span class="detail-value">5,000 ุฑูุงู</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">ุงููุชุฃุฎุฑุงุช</span>
                  <span class="detail-value">0 ุฑูุงู</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">ุงูุฅุฌูุงูู</span>
                  <span class="detail-value">5,000 ุฑูุงู</span>
                </div>
              </div>
            </div>
          </div>

          <div class="bill-actions">
            <button class="btn-green" onclick="downloadPDF(1)">ุชุญููู PDF</button>
            <button class="btn-secondary" onclick="closeModal('invoiceDetailsModal')">ุฅุบูุงู</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ูุงูุฐุฉ ุชุนุฏูู ุงููุงุชูุฑุฉ -->
    <div id="editInvoiceModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ุชุนุฏูู ุจูุงูุงุช ุงููุงุชูุฑุฉ</h3>
          <button class="btn-close" onclick="closeModal('editInvoiceModal')">ร</button>
        </div>
        <form class="form" id="editInvoiceForm">
          <div class="form-sections">
            <div class="form-section">
              <h4>ุจูุงูุงุช ุงููุงุชูุฑุฉ</h4>
              <div class="form-grid" style="grid-template-columns: repeat(2, 1fr); gap: 20px;">
                <div class="form-group">
                  <label for="edit-store-name">ุงุณู ุงููุญู</label>
                  <input type="text" id="edit-store-name" required />
                </div>
                <div class="form-group">
                  <label for="edit-owner-name">ุงุณู ุตุงุญุจ ุงููุญู</label>
                  <input type="text" id="edit-owner-name" required />
                </div>
                <div class="form-group">
                  <label for="edit-electricity">ุงูููุฑุจุงุก (ุฑูุงู)</label>
                  <input type="number" id="edit-electricity" required />
                </div>
                <div class="form-group">
                  <label for="edit-water">ุงููุงุก (ุฑูุงู)</label>
                  <input type="number" id="edit-water" required />
                </div>
                <div class="form-group">
                  <label for="edit-rent">ุงูุฅูุฌุงุฑ (ุฑูุงู)</label>
                  <input type="number" id="edit-rent" required />
                </div>
                <div class="form-group">
                  <label for="edit-month">ุงูุดูุฑ</label>
                  <input type="month" id="edit-month" required />
                </div>
                <div class="form-group">
                  <label for="edit-overdue">ุงููุชุฃุฎุฑุงุช (ุฑูุงู)</label>
                  <input type="number" id="edit-overdue" required />
                </div>
                <div class="form-group">
                  <label for="edit-total">ุงูุฅุฌูุงูู (ุฑูุงู)</label>
                  <input type="number" id="edit-total" required />
                </div>
              </div>
            </div>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn-green">ุญูุธ ุงูุชุบููุฑุงุช</button>
            <button type="button" class="btn-secondary" onclick="closeModal('editInvoiceModal')">ุฅูุบุงุก</button>
          </div>
        </form>
      </div>
    </div>
    </div>
  <script src="../views/js/mall-management/index.js"> </script>
</body>
</html>